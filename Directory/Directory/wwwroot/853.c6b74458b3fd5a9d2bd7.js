"use strict";(self.webpackChunkdirectory=self.webpackChunkdirectory||[]).push([[853],{7853:(B,h,l)=>{l.r(h),l.d(h,{DirectoryActionsModule:()=>L});var p=l(8583),f=l(3771),Z=l(9812);function b(n,s,o,e,i,r,c){try{var u=n[r](c),m=u.value}catch(Q){return void o(Q)}u.done?s(m):Promise.resolve(m).then(e,i)}var d=l(665),A=l(9765),y=l(7574),_=l(8259),a=l.n(_),N=l(9240),g=l(6340),t=l(7716),q=l(3317),C=l(6346),x=l(4220);const U=["name"];function D(n,s){if(1&n){const o=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit;return t.oxw(2).updateTelephoneNumber(i)}),t._uU(1," update "),t.qZA()}}const F=function(n,s){return{"btn-warning":n,"btn-danger":s}};function w(n,s){if(1&n){const o=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"div",0),t.TgZ(7,"div",28),t.TgZ(8,"button",29),t.NdJ("click",function(){const i=t.CHM(o),r=i.$implicit,c=i.index;return t.oxw(2).deleteTelephoneNumber(r,c)}),t._uU(9," delete "),t.qZA(),t.qZA(),t.TgZ(10,"div",28),t.YNc(11,D,2,0,"button",30),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const o=s.$implicit,e=s.index,i=t.oxw(2);t.xp6(2),t.Oqu(e+1),t.xp6(2),t.hij(" ",o.telephoneNumber," "),t.xp6(4),t.Q6J("ngClass",t.WLB(4,F,!0===i.isUpdate,!1===i.isUpdate)),t.xp6(3),t.Q6J("ngIf",i.isUpdate)}}function P(n,s){1&n&&(t.TgZ(0,"div"),t.TgZ(1,"div",32),t.TgZ(2,"h5"),t._UZ(3,"i",33),t._uU(4,"Data not loaded"),t.qZA(),t._uU(5," Telephone numbers not added "),t.qZA(),t.qZA())}function J(n,s){if(1&n&&(t.TgZ(0,"div",5),t.TgZ(1,"table",25),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th",26),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Number"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Action"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"tbody"),t.YNc(11,w,12,7,"tr",24),t.qZA(),t.qZA(),t.YNc(12,P,6,0,"div",27),t.qZA()),2&n){const o=t.oxw();t.xp6(11),t.Q6J("ngForOf",o.telephoneNumbers),t.xp6(1),t.Q6J("ngIf",o.telephoneNumbers.length<=0)}}function O(n,s){if(1&n){const o=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t._UZ(5,"td",34),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"date"),t.qZA(),t.TgZ(11,"td"),t.TgZ(12,"div",0),t.TgZ(13,"div",28),t.TgZ(14,"button",35),t.NdJ("click",function(){const r=t.CHM(o).$implicit;return t.oxw().updateContact(r)}),t._UZ(15,"i",36),t.qZA(),t.qZA(),t.TgZ(16,"div",28),t.TgZ(17,"button",37),t.NdJ("click",function(){const r=t.CHM(o).$implicit;return t.oxw().deleteContact(r)}),t._UZ(18,"i",38),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const o=s.$implicit,e=t.oxw();t.xp6(2),t.Oqu(o.id),t.xp6(2),t.AsE("",o.firstName," ",o.lastName,""),t.xp6(1),t.Q6J("innerHTML",e.renderValues(o.telephoneNumbers,null),t.oJD),t.xp6(2),t.Oqu(o.createdBy),t.xp6(2),t.Oqu(t.xi3(10,6,o.createdDate,"medium"))}}const T=function(n){return{"is-invalid":n}},S=function(n,s){return{"btn-warning":n,"btn-primary":s}},k=[{path:"",component:(()=>{class n{constructor(o,e,i,r){this.fb=o,this._helpService=e,this._directoryService=i,this.store=r,this.isUpdate=!1,this.telephoneNumbers=[],this.valueNumber="",this.dtOptions={},this.dtTrigger=new A.xQ,this.directory$=new y.y}ngOnInit(){this.store.dispatch((0,g.w)()),this.setFormBuildArea(),this.dtOptions=this._helpService.optionsDT("yes"),this.directory$=this.store.select(N.Wt),this.directory$.subscribe(()=>{$("#datatable").DataTable().clear().destroy(),this.dtTrigger.next()})}setFormBuildArea(){this.contactForm=this.fb.group({id:[0],firstName:["",[d.kI.required]],lastName:["",[d.kI.required]]})}save(){if(this.contactForm.invalid)this._helpService.validateAllFormFields(this.contactForm);else{if(a().fire({allowOutsideClick:!1,icon:"info",text:"Loading..."}),a().showLoading(),this.telephoneNumbers.length<=0)return a().close(),void a().fire({title:"Validation",text:"Enter a number phone to save data",icon:"info"});let o=this.contactForm.getRawValue();o.telephoneNumbers=this.telephoneNumbers,this._directoryService.postPatch("saveDirectory",o).subscribe(e=>{a().fire({title:e.isSuccess,text:e.message,icon:"success"}).then(i=>{a().close(),this.contactForm.reset(),this.telephoneNumbers=[],this.store.dispatch((0,g.w)()),this.isUpdate=!1})})}}addTel(o){let e=[...this.telephoneNumbers];""!==this.valueNumber?this.valueNumber.match(/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im)&&(e.push({telephoneNumber:this.valueNumber}),this.telephoneNumbers=e,this.valueNumber="",this.addTelephone.nativeElement.value=""):a().fire({title:"Validation",text:"Type a valid phone number",icon:"info"})}typing(o){let e=o.value;e.match(/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im)&&(this.valueNumber=e)}renderValues(o,e){var i="";return null!==o?(o.forEach((r,c)=>{let u="";u=`<span>number</span>: <h6>${r.telephoneNumber}</h6>`,i+=u}),i):""}updateContact(o){this.contactForm.patchValue(o),this.telephoneNumbers=o.telephoneNumbers,this.isUpdate=!0}deleteContact(o){a().fire({allowOutsideClick:!1,icon:"info",text:"Loading..."}),a().showLoading(),this._directoryService.postPatch("deleteDirectory",o).subscribe(e=>{a().fire({title:e.isSuccess,text:e.message,icon:"success"}).then(i=>{a().close(),this.contactForm.reset(),this.telephoneNumbers=[],this.store.dispatch((0,g.w)()),this.isUpdate=!1})})}deleteTelephoneNumber(o,e){let i=[...this.telephoneNumbers];return this.isUpdate?(i.splice(e,1),this.telephoneNumbers=i,a().fire({allowOutsideClick:!1,icon:"info",text:"Loading..."}),a().showLoading(),void this._directoryService.postPatch("deleteTelephoneNumber",o).subscribe(r=>{a().fire({title:r.isSuccess,text:r.message,icon:"success"}).then(c=>{a().close(),this.contactForm.reset(),this.telephoneNumbers=[],this.store.dispatch((0,g.w)()),this.isUpdate=!1})})):(i.splice(e,1),void(this.telephoneNumbers=i))}updateTelephoneNumber(o){var e=this;let i=this;a().fire({title:"Update telephone",html:`<input type="text" id="telephone" class="swal2-input" value='${o.telephoneNumber}' placeholder="Username">`,confirmButtonText:"update number",showCloseButton:!0,focusConfirm:!1,allowEscapeKey:!1,allowOutsideClick:!1,preConfirm:()=>{const c=a().getPopup().querySelector("#telephone").value;return c.match(/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im)||a().showValidationMessage("Please enter valid telephone number"),{telephoneNumber:c}}}).then(function(){var r=function(n){return function(){var s=this,o=arguments;return new Promise(function(e,i){var r=n.apply(s,o);function c(m){b(r,e,i,c,u,"next",m)}function u(m){b(r,e,i,c,u,"throw",m)}c(void 0)})}}(function*(c){if(c.value.id=o.id,c.isConfirmed){a().fire({allowOutsideClick:!1,icon:"info",text:"Loading..."}),a().showLoading();let u=yield i._directoryService.postPatch("updateTelephoneNumber",c.value).toPromise().then(m=>m);a().fire({title:u.isSuccess,text:u.message,icon:"success"}).then(m=>{a().close(),e.contactForm.reset(),e.telephoneNumbers=[],e.isUpdate=!1,e.store.dispatch((0,g.w)())})}});return function(c){return r.apply(this,arguments)}}())}ngOnDestroy(){this.directory$.subscribe().unsubscribe()}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(d.qu),t.Y36(q.s),t.Y36(C.Q),t.Y36(x.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-directory-actions-page"]],viewQuery:function(o,e){if(1&o&&t.Gf(U,5),2&o){let i;t.iGM(i=t.CRH())&&(e.addTelephone=i.first)}},decls:51,vars:17,consts:[[1,"row"],[1,"col-md-4"],[1,"card"],[1,"card-body"],["id","form",3,"formGroup","ngSubmit"],[1,"col-12","col-sm-12","col-md-12","col-lg-12","col-xl-12"],[1,"form-group","input-group-sm"],["for",""],["type","text","formControlName","firstName","placeholder","Type a firstName",1,"form-control",3,"ngClass"],["type","text","formControlName","lastName","placeholder","Type a lastName",1,"form-control",3,"ngClass"],[1,"col-12","col-sm-12","col-md-12","col-lg-12","col-xl-12","mb-4","mt-2"],[1,"input-group","input-group-sm"],["type","text","id","addTel",1,"form-control",3,"keyup"],["name",""],[1,"input-group-append"],["type","button",1,"btn","btn-info","btn-flat",3,"click"],["class","col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12",4,"ngIf"],[1,"row","justify-content-end","mt-1"],[1,"col-12","col-sm-12","col-md-12","col-lg-12","col-xl-12","mt-2"],["type","submit",1,"btn","btn-sm","btn-block",3,"ngClass"],[1,"far","fa-save","btn-icons-size"],[1,"col-md-8"],[1,"table-responsive"],["id","datatable","datatable","",1,"table","table-striped","table-bordered","table-sm","row-border","hover",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],[1,"table","table-bordered"],[2,"width","10px"],[4,"ngIf"],[1,"col"],["type","button",1,"btn","btn-sm",3,"ngClass","click"],["type","button","class","btn btn-sm btn-warning",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-warning",3,"click"],[1,"alert","alert-info","alert-dismissible"],[1,"icon","fas","fa-info"],[2,"font-size","small",3,"innerHTML"],[1,"btn","btn-sm","btn-warning","btn-block",3,"click"],[1,"fas","fa-pen-fancy"],[1,"btn","btn-sm","btn-danger","btn-block",3,"click"],[1,"fas","fa-trash-alt"]],template:function(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"form",4),t.NdJ("ngSubmit",function(){return e.save()}),t.TgZ(5,"div",0),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"label",7),t._uU(9,"First Name"),t.qZA(),t._UZ(10,"input",8),t.qZA(),t.qZA(),t.TgZ(11,"div",5),t.TgZ(12,"div",6),t.TgZ(13,"label",7),t._uU(14,"Last Name"),t.qZA(),t._UZ(15,"input",9),t.qZA(),t.qZA(),t.TgZ(16,"div",10),t.TgZ(17,"div",11),t.TgZ(18,"input",12,13),t.NdJ("keyup",function(){t.CHM(i);const c=t.MAs(19);return e.typing(c)}),t.qZA(),t.TgZ(20,"span",14),t.TgZ(21,"button",15),t.NdJ("click",function(c){return e.addTel(c)}),t._uU(22,"Add tel"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(23,J,13,2,"div",16),t.qZA(),t.TgZ(24,"div",17),t.TgZ(25,"div",18),t.TgZ(26,"button",19),t._uU(27," Save "),t._UZ(28,"i",20),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"div",21),t.TgZ(30,"div",2),t.TgZ(31,"div",3),t.TgZ(32,"div",22),t.TgZ(33,"table",23),t.TgZ(34,"thead"),t.TgZ(35,"tr"),t.TgZ(36,"th"),t._uU(37,"Id"),t.qZA(),t.TgZ(38,"th"),t._uU(39,"Names"),t.qZA(),t.TgZ(40,"th"),t._uU(41,"Numbers"),t.qZA(),t.TgZ(42,"th"),t._uU(43,"Created By"),t.qZA(),t.TgZ(44,"th"),t._uU(45,"Created Date"),t.qZA(),t.TgZ(46,"th"),t._uU(47,"Actions"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(48,"tbody"),t.YNc(49,O,19,9,"tr",24),t.ALo(50,"async"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&o&&(t.xp6(4),t.Q6J("formGroup",e.contactForm),t.xp6(6),t.Q6J("ngClass",t.VKq(10,T,!e.contactForm.get("firstName").valid&&e.contactForm.get("firstName").dirty||!e.contactForm.get("firstName").valid&&e.contactForm.get("firstName").touched)),t.xp6(5),t.Q6J("ngClass",t.VKq(12,T,!e.contactForm.get("lastName").valid&&e.contactForm.get("lastName").dirty||!e.contactForm.get("lastName").valid&&e.contactForm.get("lastName").touched)),t.xp6(8),t.Q6J("ngIf",!(e.telephoneNumbers.length<=0)),t.xp6(3),t.Q6J("ngClass",t.WLB(14,S,!0===e.isUpdate,!1===e.isUpdate)),t.xp6(7),t.Q6J("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),t.xp6(16),t.Q6J("ngForOf",t.lcZ(50,8,e.directory$)))},directives:[d._Y,d.JL,d.sg,d.Fj,d.JJ,d.u,p.mk,p.O5,f.G,p.sg],pipes:[p.Ov,p.uU],encapsulation:2}),n})(),data:{title:"Directory actions",icon:""}}];let M=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[Z.Bz.forChild(k)],Z.Bz]}),n})(),L=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[],imports:[[p.ez,f.T,M,d.UX]]}),n})()}}]);